<html>
<head>
  <title>Crazytown</title>
</head>
<body>
  <h1>Crazytown Sender App</h1>
  <google-cast-launcher style="width: 40px; height: 40px;"></google-cast-launcher>
  <button id="increment">Increase</button>
  <script>
    window['__onGCastApiAvailable'] = function(isAvailable) {
      console.log(isAvailable ? 'Cast available' : 'Cast not available');
      if (isAvailable) {
        initializeCastApi();
      }
    };
    initializeCastApi = function() {
      cast.framework.CastContext.getInstance().setOptions({
        receiverApplicationId: '3795DE18',
        autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
      });
    }
    let btn = document.getElementById('increment');
    btn.addEventListener('click', () => {
      var castSession = cast.framework.CastContext.getInstance().getCurrentSession();
      castSession.sendMessage('urn:x-cast:increment', {});
    });
  </script>
  <script src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
</body>
</html>
