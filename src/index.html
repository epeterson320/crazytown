<html>
<head>
  <title>Crazytown</title>
  <script src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
</head>
<body>
  <h1>Crazytown Sender App</h1>
  <google-cast-launcher></google-cast-launcher>
  <script>
    window['__onGCastApiAvailable'] = function(isAvailable) {
      console.log(isAvailable ? 'Cast available' : 'Cast not available');
      if (isAvailable) {
        initializeCastApi();
      }
    };
    initializeCastApi = function() {
      cast.framework.CastContext.getInstance().setOptions({
        receiverApplicationId: '3795DE18',
        autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
      });

      var castSession = cast.framework.CastContext.getInstance().getCurrentSession();
      console.log('Session', castSession);
      
      // DO something.
    }
  </script>
</body>
</html>
